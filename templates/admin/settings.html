{% extends "admin/base.html" %}

{% block title %}시스템 설정 - 관리자 모드{% endblock %}

{% block content %}
<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
    <h1 class="h2">시스템 설정</h1>
</div>

<div class="row">
    <div class="col-lg-8">
        <div class="card admin-card">
            <div class="card-header">
                <h5 class="mb-0">
                    <i data-feather="sliders" class="me-2"></i>
                    전역 설정
                </h5>
            </div>
            <div class="card-body">
                <form method="POST">
                    {{ form.hidden_tag() }}
                    
                    <h6 class="mb-3">기본 정보</h6>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            {{ form.site_title.label(class="form-label") }}
                            {{ form.site_title(class="form-control") }}
                        </div>
                        <div class="col-md-6 mb-3">
                            {{ form.contact_phone.label(class="form-label") }}
                            {{ form.contact_phone(class="form-control") }}
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            {{ form.contact_email.label(class="form-label") }}
                            {{ form.contact_email(class="form-control") }}
                        </div>
                        <div class="col-md-6 mb-3">
                            {{ form.address.label(class="form-label") }}
                            {{ form.address(class="form-control") }}
                        </div>
                    </div>
                    
                    <div class="mb-3">
                        {{ form.welcome_message.label(class="form-label") }}
                        {{ form.welcome_message(class="form-control") }}
                    </div>
                    
                    <hr class="my-4">
                    
                    <h6 class="mb-3">점수 기준 설정</h6>
                    <div class="row">
                        <div class="col-md-4 mb-3">
                            {{ form.score_presecondary.label(class="form-label") }}
                            <div class="input-group">
                                {{ form.score_presecondary(class="form-control") }}
                                <span class="input-group-text">점</span>
                            </div>
                        </div>
                        <div class="col-md-4 mb-3">
                            {{ form.score_elementary_advanced.label(class="form-label") }}
                            <div class="input-group">
                                {{ form.score_elementary_advanced(class="form-control") }}
                                <span class="input-group-text">점</span>
                            </div>
                        </div>
                        <div class="col-md-4 mb-3">
                            {{ form.score_elementary_intermediate.label(class="form-label") }}
                            <div class="input-group">
                                {{ form.score_elementary_intermediate(class="form-control") }}
                                <span class="input-group-text">점</span>
                            </div>
                        </div>
                    </div>
                    <small class="form-text text-muted">
                        이 기준에 따라 자동으로 반이 배정됩니다. 초등 초급반은 설정된 중급반 기준점수 미만이 됩니다.
                    </small>
                    
                    <hr class="my-4">
                    
                    <h6 class="mb-3">기능 설정</h6>
                    <div class="row">
                        <div class="col-md-4 mb-3">
                            <div class="form-check">
                                {{ form.enable_ai_analysis(class="form-check-input") }}
                                {{ form.enable_ai_analysis.label(class="form-check-label") }}
                            </div>
                        </div>
                        <div class="col-md-4 mb-3">
                            <div class="form-check">
                                {{ form.enable_privacy_consent(class="form-check-input") }}
                                {{ form.enable_privacy_consent.label(class="form-check-label") }}
                            </div>
                        </div>
                        <div class="col-md-4 mb-3">
                            <div class="form-check">
                                {{ form.enable_excel_export(class="form-check-input") }}
                                {{ form.enable_excel_export.label(class="form-check-label") }}
                            </div>
                        </div>
                    </div>
                    
                    <div class="d-flex justify-content-end mt-4">
                        {{ form.save_settings(class="btn btn-primary") }}
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <div class="col-lg-4">
        <div class="card admin-card">
            <div class="card-header">
                <h6 class="mb-0">
                    <i data-feather="info" class="me-2"></i>
                    설정 정보
                </h6>
            </div>
            <div class="card-body">
                <h6>점수 기준</h6>
                <p class="small">레벨 테스트 완료 후 자동으로 반을 배정할 때 사용되는 점수 기준입니다.</p>
                
                <h6>기능 설정</h6>
                <ul class="small">
                    <li><strong>AI 분석:</strong> GPT-4를 이용한 학습자 특성 분석</li>
                    <li><strong>개인정보 동의서:</strong> 디지털 서명 기능</li>
                    <li><strong>엑셀 내보내기:</strong> 전체 데이터 다운로드</li>
                </ul>
                
                <h6>주의사항</h6>
                <p class="small text-warning">
                    <i data-feather="alert-triangle" class="me-1"></i>
                    설정 변경 후 저장을 눌러야 반영됩니다.
                </p>
            </div>
        </div>
    </div>
</div>
{% endblock %}